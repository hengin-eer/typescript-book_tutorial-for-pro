## TypeScriptの恩恵
### 型安全性

型安全性とは型の間違いによるプログラムを事前に検出して知らせてくれる仕組みのこと。TSCというコンパイラによりコードが型チェックを行う。

型チェックが用意されていないときに起こるバグとして、関数の引数にて想定しない値が入力されてしまうものがある。
例えば以下のようなコードである。

```typescript
function hello(personName: string) {
    console.log(`Hello, ${personName}`);
}

hello(1234);
// string型じゃない1234(number型)が入力されてしまったためエラーが発生
```

この時、TypeScriptは以下のようなエラーメッセージを出力する。

> Argument of type 'number' is not assignableto parameter of type 'string'.

このように簡単なプログラムでは支障が少ないが、データベースから取得してきたデータを誤って別のところで表示、または操作してしまうと大惨事になる場合がある。
型安全性は、プロジェクト規模が大きくなればなるほど必須となってくる仕組みである。

「JavaScriptではコンパイルエラーなんて出ないし、実行できるじゃないか！」なんて考えずに、事故が発生する前に警告してくれたTSCに感謝する気持ちを忘れない。

### ドキュメント化
**静的型付けされているコードは読みやすい**。
型情報がソースコードに含まれる分、このプログラムが何を意図しているのかハッキリする。

もちろん、コードを読みやすくするための工夫は他にもある。
- 変数・関数名の命名規則
- 可読性の高いメソッドの使用
  - e.g. for, if文のネストを深くしすぎ無い
- コメント文

このプログラムの可読性を上げることで、**品質チェックのためのコードレビューがスムーズになる**し、**プログラムの編集も簡単になる**。

---

また、今までは人間目線でのメリットについて述べたが、静的型付けによりプログラムの解像度が上がるため、当然コンピュータにとってもメリットはある。

例えば、**入力補完に役立つ**
変数や関数の候補を提案してくれることで**typoによるバグといった、ヒューマンエラーを未然に防げる**。
学校の授業で行う実験ではたまに補完機能が無いエディタを使用するが、このときtypoによるデバックが非常に煩わしい。気づかなければわりと30分時間を取られたりする。決して誇張ではない。

そういえば、TypeScriptは2012年に誕生したので、なんやかんや12歳。小学6年生である。

## JavaScriptとの差異
名前の通り、TypeScriptはJavaScriptをベースとしており、これに型注釈が書けるようになったもの。
型注釈を記述することで、型チェックを行い、プログラムの精度を上げることが出来る。

### 静的・動的なチェック
この型チェックは所謂、**静的なチェック**である。
静的なチェックとは、**プログラムを実行せずとも内容を確認できる**ということである。

対称の動的なチェックでは例えば、プログラムのテストがこれに当たる。
テストは実際にプログラムを実行した際に、プログラムが間違っていないかを確認するものである。

言い換えれば、**動的なチェックではプログラムが実行できる状態**になってしまっている。
つまり、テストを実行して、詳細にプログラムのバグを確認・修正するといった、常に見えにくいバグと闘わなければならない。

それに対し、プログラムを事前チェックし、間違っているプログラムを弾き出してくれるTypeScriptは非常に効率的なシステムである。

### TypeScriptはあくまで後付け
TypeScriptで注釈をつけた**型情報はプログラムの実行時に使われない**。
言い換えると、ランタイムの挙動はTypeScriptプログラムの型情報に依存しない、ということ。

TypeScriptはコンパイラを通じて完全にJavaScriptへと変換されるので、TypeScriptの情報は直接に参照されないということだ。

これだけ聞くと当たり前のように思えるが、次の例を見ると意図が分かった。

#### 例: 関数オーバーローディング機能
プログラミング言語によっては、関数オーバーローディング機能というものがある。
この機能はざっくり言うと、**同じ名前の関数を複数作成**できるものである。
当然、これらを区別する必要があるのだが、この時使われるのが引数の「型情報」だ。
以下のようなプログラムを考えてみる。

```typescript
function double(value: number) {
    console.log(value * 2);
}

function double(value: string) {
    console.log(value.repeat(2));
}

double(123); // 1つ目の関数が実行される
// > 246
double("hello"); // 2つ目の関数が実行される
// > hellohello

```

このように同じ関数名でも、引数の型により区別が出来ている。

しかし、TypeScriptではこの機能はサポートされていない。
何故なら**JavaScriptでサポートされていない機能**だからだ。

元々**JavaScriptは動的型付け言語だ**。この言語で関数オーバーローディング機能を実装したらどうなるかは想像に容易いだろう。

#### まとめ
つまりはTypeScriptの型チェック機能を利用したプログラムを組むことへの誤解に気を付けることである。
TypeScriptで変数の型を意識してプログラムを組むことで、堅牢度を高めることはできる。
先ほどのドキュメント化によってプログラムの意図が分かりやすくなることも当てはまる。

しかし、**TypeScriptで注釈付けした型情報は、JavaScriptとなった瞬間に失われる**ということだ。
つまりJavaScriptの実行環境では型情報を用いて、処理を最適化することはできない。

> TypeScriptでプログラムの最適化をできるのは、あくまで人間である。

### トランスパイル
TypeScriptのJavaScript化もトランスパイルだと思っている。
他には古い構文に変換してくれる、というものがある。

IEが現役だったころは、Node.js環境でもES5に変換していたりしたが、現在はほぼ不要な気がする。

### ECMAScriptとの関係
ECMAScriptについては前提知識があるため省略。
興味深いのは、**TypeScriptではESのステージ3の機能をサポートしている**ということ。

JavaScriptでは最終段階である、ステージ4になった機能が次回ESの仕様となる。
この違いはTypeScriptの「JavaScriptに無い独自機能を極力避ける」という方針と矛盾しそうだが、ステージ3なんて基本的に近い将来サポートされるのだから、よりモダンな機能を取り入れようという、開発側の意図に賛同したい。

## 開発環境について
JavaScriptが動作する環境なら動く（ただし基本はJSへのコンパイル後）。ブラウザやNode.js、Denoなど。
書籍ではNode.js上で動作するものと考える。

基本ブラウザで動作する言語なので、OSも問わない。
エディタはVSCodeで良い。
